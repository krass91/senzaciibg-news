<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - SenzaciiBG</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #f5f5f5; }
        .sidebar { min-height: 100vh; background: #1a1a1a; }
        .sidebar a { color: #aaa; text-decoration: none; padding: 12px 20px; display: block; }
        .sidebar a:hover, .sidebar a.active { color: white; background: #e60000; }
        .news-table td { vertical-align: middle; }
        .news-img { width: 80px; height: 60px; object-fit: cover; border-radius: 4px; }
        
        /* Login Screen */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .login-container h2 { text-align: center; margin-bottom: 1.5rem; }
        .login-container .btn { width: 100%; }
        .error-msg { color: red; font-size: 0.9rem; display: none; }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen">
        <div class="login-container">
            <h2><i class="fas fa-lock"></i> Admin Login</h2>
            <p class="text-muted text-center">–í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞ –∑–∞ –¥–æ—Å—Ç—ä–ø</p>
            <input type="password" id="adminPassword" class="form-control mb-3" placeholder="–ü–∞—Ä–æ–ª–∞">
            <button class="btn btn-danger" onclick="checkPassword()">
                <i class="fas fa-sign-in-alt"></i> –í—Ö–æ–¥
            </button>
            <p class="error-msg mt-3" id="errorMsg">–ì—Ä–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞!</p>
        </div>
    </div>

    <!-- Admin Panel (hidden until logged in) -->
    <div id="adminPanel" style="display:none;">
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-2 sidebar p-0">
                    <div class="p-3 text-white border-bottom">
                        <h5><i class="fas fa-cog"></i> Admin Panel</h5>
                    </div>
                    <a href="#" class="active" onclick="showSection('dashboard')"><i class="fas fa-home me-2"></i> –ù–∞—á–∞–ª–æ</a>
                    <a href="#" onclick="showSection('news')"><i class="fas fa-newspaper me-2"></i> –ù–æ–≤–∏–Ω–∏</a>
                    <a href="#" onclick="showSection('add')"><i class="fas fa-plus me-2"></i> –î–æ–±–∞–≤–∏ –Ω–æ–≤–∏–Ω–∞</a>
                    <a href="#" onclick="showSection('settings')"><i class="fas fa-cog me-2"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i> –ò–∑—Ö–æ–¥</a>
                    <a href="index.html"><i class="fas fa-eye me-2"></i> –ü—Ä–µ–≥–ª–µ–¥ —Å–∞–π—Ç–∞</a>
                </div>

                <!-- Main Content -->
                <div class="col-md-10 p-4">
                    <!-- Dashboard -->
                    <div id="dashboard">
                        <h3>üìä –¢–∞–±–ª–æ</h3>
                        <div class="row mt-4">
                            <div class="col-md-3">
                                <div class="card text-white bg-primary mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">–í—Å–∏—á–∫–∏ –Ω–æ–≤–∏–Ω–∏</h5>
                                        <h2 id="totalNews">0</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-white bg-success mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">–¢–∞–∑–∏ —Å–µ–¥–º–∏—Ü–∞</h5>
                                        <h2 id="weekNews">0</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-white bg-warning mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
                                        <h2>5</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-white bg-danger mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">–û–±—â–æ –ø—Ä–µ–≥–ª–µ–∂–¥–∞–Ω–∏—è</h5>
                                        <h2 id="totalViews">0</h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News List -->
                    <div id="news" style="display:none;">
                        <h3>üì∞ –í—Å–∏—á–∫–∏ –Ω–æ–≤–∏–Ω–∏</h3>
                        <button class="btn btn-danger mb-3" onclick="showSection('add')">
                            <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏ –Ω–æ–≤–∏–Ω–∞
                        </button>
                        <table class="table table-striped news-table">
                            <thead>
                                <tr>
                                    <th>–°–Ω–∏–º–∫–∞</th>
                                    <th>–ó–∞–≥–ª–∞–≤–∏–µ</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–î–∞—Ç–∞</th>
                                    <th>–ü—Ä–µ–≥–ª–µ–¥–∏</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="newsTable"></tbody>
                        </table>
                    </div>

                    <!-- Add News -->
                    <div id="add" style="display:none;">
                        <h3>‚ûï –î–æ–±–∞–≤–∏ –Ω–æ–≤–∏–Ω–∞</h3>
                        <form id="newsForm" class="card p-4 mt-3">
                            <div class="mb-3">
                                <label class="form-label">–ó–∞–¥–∞–Ω–∏–µ</label>
                                <input type="text" class="form-control" id="title" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select class="form-select" id="category">
                                    <option value="politics">–ü–æ–ª–∏—Ç–∏–∫–∞</option>
                                    <option value="sports">–°–ø–æ—Ä—Ç</option>
                                    <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                                    <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                                    <option value="entertainment">–ó–∞–±–∞–≤–ª–µ–Ω–∏–µ</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea class="form-control" id="excerpt" rows="2" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–ü—ä–ª–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</label>
                                <textarea class="form-control" id="content" rows="8" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">URL –Ω–∞ —Å–Ω–∏–º–∫–∞</label>
                                <input type="url" class="form-control" id="image" placeholder="https://...">
                            </div>
                            <button type="submit" class="btn btn-danger">
                                <i class="fas fa-save"></i> –ü—É–±–ª–∏–∫—É–≤–∞–π
                            </button>
                        </form>
                    </div>

                    <!-- Settings -->
                    <div id="settings" style="display:none;">
                        <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="card p-4 mt-3">
                            <h5>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å–∞–π—Ç–∞</h5>
                            <div class="mb-3">
                                <label class="form-label">–ò–º–µ –Ω–∞ —Å–∞–π—Ç–∞</label>
                                <input type="text" class="form-control" id="siteName" value="SenzaciiBG">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–ü–∞—Ä–æ–ª–∞ –∑–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª</label>
                                <input type="password" class="form-control" id="adminPass" placeholder="–ù–æ–≤–∞ –ø–∞—Ä–æ–ª–∞">
                                <small class="text-muted">–û—Å—Ç–∞–≤–∏ –ø—Ä–∞–∑–Ω–æ –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∞—Ç–∞</small>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea class="form-control" id="siteDesc" rows="3">–ù–æ–≤–∏–Ω–∏ –æ—Ç –ë—ä–ª–≥–∞—Ä–∏—è –∏ —Å–≤–µ—Ç–∞</textarea>
                            </div>
                            <button class="btn btn-primary" onclick="saveSettings()">
                                <i class="fas fa-save"></i> –ó–∞–ø–∞–∑–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Default password - CHANGE THIS!
        const DEFAULT_PASSWORD = 'senzacii2026';
        
        // Check if password is set
        function getPassword() {
            return localStorage.getItem('senzaciibg_admin_password') || DEFAULT_PASSWORD;
        }

        function checkPassword() {
            const input = document.getElementById('adminPassword').value;
            const correct = getPassword();
            
            if (input === correct) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                localStorage.setItem('senzaciibg_logged_in', 'true');
                loadNews();
                updateStats();
            } else {
                document.getElementById('errorMsg').style.display = 'block';
            }
        }

        // Check if already logged in
        if (localStorage.getItem('senzaciibg_logged_in') === 'true') {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            loadNews();
            updateStats();
        }

        function logout() {
            localStorage.removeItem('senzaciibg_logged_in');
            location.reload();
        }

        let news = JSON.parse(localStorage.getItem('senzaciibg_news') || '[]');

        function showSection(id) {
            document.querySelectorAll('#dashboard, #news, #add, #settings').forEach(el => el.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            if (id === 'news') loadNewsTable();
            updateStats();
        }

        function updateStats() {
            document.getElementById('totalNews').textContent = news.length;
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const weekNews = news.filter(n => new Date(n.date) >= weekAgo).length;
            document.getElementById('weekNews').textContent = weekNews;
            document.getElementById('totalViews').textContent = news.reduce((sum, n) => sum + (n.views || 0), 0);
        }

        function loadNews() {
            news = JSON.parse(localStorage.getItem('senzaciibg_news') || '[]');
        }

        function loadNewsTable() {
            const tbody = document.getElementById('newsTable');
            if (news.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="text-center">–ù—è–º–∞ –Ω–æ–≤–∏–Ω–∏</td></tr>';
                return;
            }
            tbody.innerHTML = news.map(n => `
                <tr>
                    <td><img src="${n.image}" class="news-img" alt=""></td>
                    <td>${n.title}</td>
                    <td><span class="badge bg-secondary">${getCategoryName(n.category)}</span></td>
                    <td>${n.date}</td>
                    <td>${n.views || 0}</td>
                    <td>
                        <button class="btn btn-sm btn-danger" onclick="deleteNews(${n.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function getCategoryName(cat) {
            const names = { politics: '–ü–æ–ª–∏—Ç–∏–∫–∞', sports: '–°–ø–æ—Ä—Ç', business: '–ë–∏–∑–Ω–µ—Å', tech: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', entertainment: '–ó–∞–±–∞–≤–ª–µ–Ω–∏–µ' };
            return names[cat] || cat;
        }

        document.getElementById('newsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const newNews = {
                id: Date.now(),
                title: document.getElementById('title').value,
                category: document.getElementById('category').value,
                excerpt: document.getElementById('excerpt').value,
                content: document.getElementById('content').value,
                image: document.getElementById('image').value || 'https://picsum.photos/600/400?random=' + Math.floor(Math.random() * 1000),
                date: new Date().toLocaleDateString('bg-BG'),
                views: 0
            };
            news.unshift(newNews);
            localStorage.setItem('senzaciibg_news', JSON.stringify(news));
            alert('‚úÖ –ù–æ–≤–∏–Ω–∞—Ç–∞ –µ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–∞!');
            this.reset();
            showSection('news');
        });

        function deleteNews(id) {
            if (confirm('–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏, —á–µ –∏—Å–∫–∞—à –¥–∞ –∏–∑—Ç—Ä–∏–µ—à —Ç–∞–∑–∏ –Ω–æ–≤–∏–Ω–∞?')) {
                news = news.filter(n => n.id !== id);
                localStorage.setItem('senzaciibg_news', JSON.stringify(news));
                loadNewsTable();
                updateStats();
            }
        }

        function saveSettings() {
            const newPass = document.getElementById('adminPass').value;
            if (newPass) {
                localStorage.setItem('senzaciibg_admin_password', newPass);
            }
            
            const settings = {
                name: document.getElementById('siteName').value,
                description: document.getElementById('siteDesc').value
            };
            localStorage.setItem('senzaciibg_settings', JSON.stringify(settings));
            alert('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ —Å–∞ –∑–∞–ø–∞–∑–µ–Ω–∏!');
        }
    </script>
</body>
</html>
